{% extends 'index.html' %}
{% block content %}
<!-- 
<div class="container" style="margin-top: 50px; margin-bottom: 50px;">

    <h2>Currency Calculator</h2>

        <p class="lead">Convert the currency</p>

        <form class="form-inline">
            <div class="form-group mb-2">
                <input type="number" class="form-control" id="amount"/>
            </div>

            <div class="form-group mx-sm-3 mb-2">
                <label>From</label>
                <select class="form-control" id="currency-1" required>
                    {% for key, value in rates %}
                    <option>{{ key }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-group mx-sm-3 mb-2">
                <label>To</label>
                <select class="form-control" id="currency-2" required>
                    {% for key, value in rates %}
                    <option>{{ key }}</option>
                    {% endfor %}
                </select>
            </div>  
            <button class="btn calculate-btn btn-primary mb-2">Return</button>
        </form>

        <div class="result">
            <p>
                <span class="given-amount"></span> 
                <span class="base-currency"></span>
                <span class="final-result"></span> 
                <span class="second-currency"></span>
            </p>
        </div>
</div> 

<script>
    var crrncy = {'EUR': {'PLN': 4.15, 'USD': 0.83}, 'USD': {'PLN': 3.45, 'EUR': 1.2}}

    var btn = document.querySelector('.calculate-btn');
    var baseCurrencyInput = document.getElementById('currency-1');
    var secondCurrencyInput = document.getElementById('currency-2');
    var amountInput = document.getElementById('amount');
    var toShowAmount = document.querySelector('.given-amount');
    var toShowBase = document.querySelector('.base-currency');
    var toShowSecond = document.querySelector('.second-currency');
    var toShowResult = document.querySelector('.final-result');

    function convertCurrency(event) {
      event.preventDefault();
      var amount = amountInput.value;
      var from = baseCurrencyInput.value;
      var to = secondCurrencyInput.value;
      var result = 0;
      
      try{
        if (from == to){
          result = amount;
        } else {
        result = amount * crrncy[from][to];
      }
      }
      catch(err) {
        result = amount * (1 / crrncy[to][from]);
      }
      
      toShowAmount.innerHTML = amount;
      toShowBase.textContent = from + ' = ';
      toShowSecond.textContent = to;
      toShowResult.textContent = result; 
    }
    btn.addEventListener('click', convertCurrency);
</script> -->


<div class="container" style="margin-top: 50px; margin-bottom: 50px;">
    <h2>Rates</h2>
    <ins>({{ unit_base }})</ins>
    <table class="table table-bordered" style="text-align: center;">
        <thead>
            <tr>
                <th style="width: 60%;">Currency</th>
                <th style="width: 25%;">Rate</th>
                <th style="width: 15%;">Chart</th>
            </tr>
        </thead>
        <tbody>
            {% for key, value in rates %}
            <tr>
                <td>{{ key }}</td>
                <td>{{ value }}</td>
                <td><a href="#">chart</a></td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}